<app-header></app-header>
<div class="container">

<div class="row">

<div class="col">

<div class="text-center" style="color: #c4224c;">
  <h2>My Address</h2>
</div>

<div class="load" style="min-height: 8em; margin: 5em 0 8em 0" *ngIf="loading">
    <app-loader></app-loader>
</div>

<div class="row" *ngIf ="!loading">

  <div class="col-lg-4 col-md-6 col-sm-6" *ngFor="let a of useraddress">
  <div class="card border-danger">
    <div class="card-body">
      <h5 class="card-title">{{a.title}}</h5>
      <h6 class="card-subtitle mb-2 text-muted">{{a.first_name}}</h6>
      <p class="card-text">{{a.address}}, {{a.address2}}</p>
      <p class="card-text">{{a.pincode}}</p>
      <p class="card-text">{{a.state}}</p>
      <p class="card-text">{{a.locality}}</p>
      <button style="color: white; background-color: #c4224c; margin-right: 10px; border-radius: 8px;" type="button" class="btn text-center" (click)="deleteAddress(a._id)">Delete</button>
      <button style="color: white; background-color: #c4224c; margin-left: 10px; border-radius: 8px;" type="button" class="btn text-center" (click)="editAddress(a._id);setEditMode(true)">Edit</button>
    </div>
  </div>
  </div>

  <div class="col-lg-4 col-md-6 col-sm-6">
    <div class="card" data-toggle="modal" data-target="#myModal">
      <button class="btn text" style="background-color: #c4224c; color: white;" data-backdrop="static" data-keyboard="false" data-toggle="modal" data-target="#myModal" (click)="resetForm();setEditMode(false);" >+
        ADDRESS</button>
    </div>
  </div>

</div>


  <!-- <div class="col-md-3" *ngFor="let a of allAddresses">
    <div class="add-col">
      <div class="columns" id="col1">
        <div class="card" style="width: 18rem;">
          <div class="card-body">
            <h5 class="card-title">{{a.title}}</h5>
            <h6 class="card-subtitle mb-2 text-muted">{{a.name}}</h6>
            <p class="card-text">{{a.address}}</p>
            <p class="card-text">{{a.state}}</p>
            <p class="card-text">{{a.locality}}</p>
            <button style="color: white; background-color: #c4224c; width: 50%; border-radius: 0%; padding: 0.375rem 0.25rem;" type="button" class="btn text-center">Delete</button>
          </div>
        </div>
      </div>
    </div>
  </div> -->

</div>
</div>
</div>

<!-- The Modal -->
<div class="modal fade" id="myModal">
    <div class="modal-dialog modal-lg modal-dialog-centered" style="padding: 0px;">
      <div class="modal-content">

        <!-- Modal Header -->
        <div class="modal-header">
          <h5 *ngIf="!editForm">Add New Address</h5>
          <h5 *ngIf="editForm">Update Address</h5>

          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>

        <!-- Modal body -->
        <div class="modal-body">
          <div class="container">
            
              <form [formGroup]="createForm" class="create-form">
                  <div class="row" style="margin: 0; padding: 0;">
    
                <div class="col-sm-6">
                  <label for="title">Title</label>
                  <input type="text" id="title" placeholder="Title (eg. HOME).." formControlName="title">
                </div>
    
                <div class="col-sm-6">
                  <label for="name">Your Name</label>
                  <input type="text" id="name" placeholder="Your Delecious Name.." formControlName="first_name" >
                </div>
    
                  <!-- <label for="name">Last Name</label>
                  <input type="text" id="name" placeholder="Last Name.." formControlName="last_name" > -->
                  
                <div class="col-sm-6">
                  <label for="address">Address</label>
                  <input type="text" id="address" placeholder="Your Address.." formControlName="address" >
                </div>
    
                <div class="col-sm-6">
                  <label for="address">Address Line 2</label>
                  <input type="text" id="address2" placeholder="Address Line 2.." formControlName="address2">
                </div>
                  
                <div class="col-sm-6">
                  <label for="pincode">Postal Code</label>
                  <input type="text" id="pincode" placeholder="Postal Code" formControlName="pincode">
                </div>
    
                <div class="col-sm-6">
                  <label for="state">State</label>
                  <select id="state" formControlName="state">
                    <option value="" hidden>Select Your State</option>
                    <option value="GTA">GTA</option>
                  </select>
                </div>
    
                <div class="col-sm-6">
                  <label for="locality">Locality</label>
                  <select id="locality" formControlName="locality">
                      <option value="" hidden>Select Your Locality</option>
                       <ng-container *ngFor="let i of localities">
                          <option *ngIf= "i.enable">{{i.name}}</option>
                      </ng-container>
                    </select>
                </div>
    
                  <!-- <input type="text" id="locality" placeholder="Locality.." formControlName="locality"> -->
    
                  <div class="col-sm-12">
                  <button class="btn button" *ngIf="editForm" type="submit"  data-dismiss="modal" id="submit"  (click)= "editSave(fetchedAddress)">Save</button>
                  <button class="btn button" *ngIf="!editForm"type="submit"  data-dismiss="modal" id="submit"  (click)= "addAddress()">Save</button>
                  </div>
    
                </div>
                </form>
           

          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="roww">
    <div class="col-sm-12">
      <div id="snackbar">Updated Successfully</div>
    </div>
  </div>

<app-footer></app-footer>
